<html>

<!-- Mirrored from thefullsnack.com/posts/phuc-tap-hoa-datepicker.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 May 2020 03:22:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf8" /><!-- /Added by HTTrack -->
<head>
<title>Phức tạp hóa vấn đề: Datepicker và các thuật toán đằng sau nó | Huy's Blog</title>
<meta charset="utf-8">
<meta http-equiv="content-type" content="text/html;"><meta name=viewport content="initial-scale=1.0 maximum-scale=1.0">
<meta property='og:image' content='../img/default.jpg'>
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../manifest.json">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">
<link href="../css/theme.dist.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../emoji/css/emoji.dist.css">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Space+Mono:400,700&amp;display=swap&amp;subset=vietnamese" rel="stylesheet">

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92158965-1"></script>
<script>
	       window.dataLayer = window.dataLayer || [];
	       function gtag(){dataLayer.push(arguments);}
	       gtag('js', new Date());

	       gtag('config', 'UA-92158965-1');
	      </script>
</head>
<body lang="en" class="post">
<div class="header lightweight-theme">
<a href="../index.html"><span class="avatar"></span></a>
</div>
<div class="container">
<div class="main">
<h1><span>Phức tạp hóa vấn đề: Datepicker và các thuật toán đằng sau nó</span></h1>
<p>Trong sê-ri bài viết <strong>Phức tạp hóa vấn đề</strong> này, mình sẽ trình bày các vấn đề kĩ thuật đằng sau những tác vụ đơn giản thường gặp trong công việc hằng ngày. Sẽ thật là tệ nếu chúng ta chỉ là những lập trình viên chỉ biết dùng những thứ được dọn ra sẵn và dâng tận miệng chỉ để xong việc, mà bỏ qua những kiến thức hay ho đằng sau, vốn đã dành cho chúng ta ngay từ đầu.</p>
<blockquote>
<p>Mọi công việc bất kỳ đều dễ đối với những người không phải làm nó. - Murphy's law</p>
</blockquote>
<hr />
<p>Datepicker là một dạng component đã quá quen thuộc với các bạn làm front-end, được sử dụng rộng rãi trên rất nhiều ứng dụng web. Mục đích của nó là hiển thị một &quot;tờ&quot; lịch trên màn hình máy tính để người dùng có thể chọn ngày tháng một cách dễ dàng.</p>
<p><img src="img/components_pickers_date3.png" alt="" /></p>
<p>Cách sử dụng các component này cũng rất là đơn giản, vì hầu như các thư viện UI phổ biến hiện nay đều có cả, ví dụ đây là cách sử dụng trong <a href="https://angular-ui.github.io/bootstrap/">Angular UI</a></p>
<pre><code>&lt;input type=&quot;text&quot; uib-datepicker-popup=&quot;{{format}}&quot; /&gt;
</code></pre>
<p>Mặc dù Datepicker chẳng có vẻ gì là to tát, nhưng thuật toán đằng sau nó thì lại rất thú vị và đáng để tìm hiểu.</p>
<h2><a href="#phân-tích-vấn-đề" aria-hidden="true" class="anchor" id="phân-tích-vấn-đề"></a>Phân tích vấn đề</h2>
<p>Khi hiển thị lịch cho một tháng bất kì, chúng ta phải bắt đầu hiển thị từ ngày đầu tiên của tháng đó (ngày 1), vấn đề là ngày này có thể thuộc một &quot;thứ&quot; nào đó bất kì trong tuần (từ thứ 2 đến CN). Các thứ trước đó sẽ bị bỏ trống vì nó thuộc về tháng trước.</p>
<pre><code>      January                February                March
Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa   Su Mo Tu We Th Fr Sa
               1  2       1  2  3  4  5  6          1  2  3  4  5
3  4  5  6  7  8  9    7  8  9  10 11 12 13   6  7  8  9  10 11 12
10 11 12 13 14 15 16   14 15 16 17 18 19 20   13 14 15 16 17 18 19
17 18 19 20 21 22 23   21 22 23 24 25 26 27   20 21 22 23 24 25 26
24 25 26 27 28 29 30   28 29                  27 28 29 30 31
31
</code></pre>
<p>Vì vậy, việc đầu tiên chúng ta cần làm là <em>xác định ngày đầu tiên của tháng cần tạo là ngày thứ mấy trong tuần</em>.</p>
<p>Sau khi đã xác định được đâu là ngày bắt đầu, chúng ta sẽ bắt đầu điền tiếp vào các ngày tiếp theo cho đến hết tháng (30 hoặc 31 ngày). Riêng tháng 2 sẽ có 28 ngày, đặc biệt vào <em>năm nhuận</em> thì tháng 2 sẽ có 29 ngày. Vậy, việc thứ 2 cần làm đó là <em>xác định năm hiện tại có phải là năm nhuận</em> không.</p>
<h2><a href="#công-thức-zeller---tính-thứ-ngày-trong-tuần" aria-hidden="true" class="anchor" id="công-thức-zeller---tính-thứ-ngày-trong-tuần"></a>Công thức Zeller - Tính thứ ngày trong tuần</h2>
<p><img src="img/thinking.jpg" alt="" /></p>
<p><strong>Nếu không thích toán thì các bạn có thể bỏ qua và đọc đến phần <a href="#implement-c-ng-th-c-zeller">Implement</a> luôn cũng được, nhưng mà nên đọc phần này để hiểu nhé :)</strong></p>
<p>Đầu tiên, ta sẽ tìm hiểu về <strong>công thức Zeller</strong>. Đây là công thức giúp chúng ta xác định được một ngày thuộc thứ mấy. Giúp giải quyết vấn đề thứ 1 đã đề cập ở trên.</p>
<p>Công thức Zeller có dạng:</p>
<pre class='math'>$$
weekday=\left( \frac{13 \times month - 1}{5}+\frac{year}{4}+\frac{century}{4}+day+year-2\times century \right)\%7
$$</pre>
<p>Trong đó ta có:</p>
<table>
<thead>
<tr>
<th>Ký hiệu</th>
<th>Mô tả</th>
<th>Ví dụ</th>
</tr>
</thead>
<tbody>
<tr>
<td>$weekday$</td>
<td>là thứ ngày mà chúng ta cần tìm</td>
<td><code>0 = Chủ nhật</code>, <code>1 = Thứ 2</code>,...</td>
</tr>
<tr>
<td>$month$</td>
<td>là tháng chúng ta cần xét, giá trị <code>1</code> đến <code>12</code>, bắt đầu từ tháng <code>3</code></td>
<td><code>Tháng 3 = 1</code>, <code>Tháng 4 = 2</code>,..., <code>Tháng 12 = 10</code>, <code>Tháng 1 = 11</code>, <code>Tháng 2 = 12</code></td>
</tr>
<tr>
<td>$day$</td>
<td>là ngày chúng ta cần tính</td>
<td>ngày 1, 2, 3,..., 29, 30, 31</td>
</tr>
<tr>
<td>$century$</td>
<td>là thế kỷ hiện tại của năm đang xét, <strong>bắt đầu từ 0</strong>, hoặc đơn giản là 2 con số đầu tiên của năm hiện tại</td>
<td><code>Thế kỷ 21 = 20</code></td>
</tr>
<tr>
<td>$year$</td>
<td>là số năm thứ mấy thuộc thế kỷ đang xét, hoặc đơn giản là 2 con số cuối cùng của năm hiện tại</td>
<td><code>Năm 2016 = 16</code></td>
</tr></tbody></table>
<hr />
<p><strong>Ví dụ:</strong> Tìm xem ngày <code>18/09/2016</code> là thứ mấy?</p>
<p>Đối với ngày $18/09/2016$ ta có:</p>
<p>$month = 7$, $day = 18$, $century = 20$, $year = 16$</p>
<p>Áp dụng công thức Zeller, ta có:</p>
<pre class='math'>$$
\begin{align}
weekday &= \left( \frac{13 \times 7 - 1}{5}+\frac{16}{4}+\frac{20}{4}+18+16-2\times 20 \right)\%7 \\

&= 21 \% 7 \\

&= 0

\end{align}
$$</pre>
<p>Như vậy ta tính được ngày $18/09/2016$ có $weekday = 0$ suy ra đó là ngày <em>Chủ nhật</em>. Ta có thể tra lịch để kiểm chứng:</p>
<pre><code>         September 2016
Su   Mo   Tu   We   Th   Fr   Sa
                    1    2    3
4    5    6    7    8    9    10
11   12   13   14   15   16   17
[18] 19   20   21   22   23   24
25   26   27   28   29   30
</code></pre>
<hr />
<h3><a href="#implement-công-thức-zeller" aria-hidden="true" class="anchor" id="implement-công-thức-zeller"></a>Implement công thức Zeller</h3>
<p>Chúng ta có thể implement công thức Zeller bằng JavaScript như sau:</p>
<pre><code>// hàm tính thế kỷ
function century(y) {
	return Math.floor(y / 100);
}

// hàm tính tháng cho công thức zeller
function month(m) {
	if (m &lt; 3) return m + 10;
	else return m - 2;
}

// hàm tính năm trong thể kỷ
function year(y) {
	return y % 100;
}

// công thức zeller
function _zeller(day, month, year, century) {
  return ((13 * month - 1) / 5 + year / 4 + century/4 + day + year - 2 * century) % 7;
}

// viết lại cho dễ dùng
function zeller(d, m, y) {
   return _zeller(d, month(m), year(y), century(y));
}
</code></pre>
<p>Ở đây mình tách từng hàm xử lý ra cho dễ đọc, các bạn có thể gộp chung lại cho gọn như thế này cũng được:</p>
<pre><code>function zeller(d, m, y) {
    return ((13 * ((m &lt; 3) ? (m + 10) : (m - 2)) - 1) / 5 + (y % 100) / 4 + Math.floor(y / 100) / 4 + d + (y % 100) - 2 * Math.floor(y / 100)) % 7;
}
</code></pre>
<p>Kết quả của công thức Zeller không phải lúc nào cũng là số nguyên (integer), nhưng ta chỉ cần xét phần số nguyên trong đó. Để tách lấy phần nguyên, ta dùng hàm <code>Math.trunc()</code>:</p>
<pre><code>var zweekday = zeller(12, 5, 2016); // = 4.600000000000001
var weekday = Math.trunc(zweekday); // = 4
</code></pre>
<h2><a href="#xác-định-năm-nhuận" aria-hidden="true" class="anchor" id="xác-định-năm-nhuận"></a>Xác định năm nhuận</h2>
<p><img src="img/leapyear.jpg" alt="" /></p>
<p>Cái này thì phổ biến quá rồi không có gì để nói, tổng hợp lại tí điều kiện xác định năm nhuận cho bạn nào cần:</p>
<table>
<thead>
<tr>
<th>Điều kiện</th>
<th>Là năm nhuận?</th>
</tr>
</thead>
<tbody>
<tr>
<td>Không chia hết cho 4</td>
<td>Sai</td>
</tr>
<tr>
<td>Chia hết cho 4</td>
<td>Đúng</td>
</tr>
<tr>
<td>Chia hết cho 100</td>
<td>Sai</td>
</tr>
<tr>
<td>Chia hết cho 400</td>
<td>Đúng</td>
</tr></tbody></table>
<p>Giờ quăng code luôn:</p>
<pre><code>function isLeap(year) {
   if ((year % 4) || ((year % 100 === 0) &amp;&amp; (year % 400))) return 0;
   else return 1;
}
</code></pre>
<p>Ở đây chúng ta trả về giá trị <code>0</code> (không nhuận) và <code>1</code> (nhuận) thay vì <code>true</code>/<code>false</code> để phục vụ cho hàm tính số ngày của tháng sẽ đề cập ở phần sau.</p>
<h2><a href="#tính-số-ngày-của-một-tháng" aria-hidden="true" class="anchor" id="tính-số-ngày-của-một-tháng"></a>Tính số ngày của một tháng</h2>
<p><img src="img/daysmonth.jpg" alt="" /></p>
<p>Tiếp đến chúng ta sẽ có hàm tính số ngày của một tháng, ví dụ tháng 1 là 31 ngày, tháng 2 sẽ có 28 ngày nếu không phải năm nhuận và 29 ngày nếu năm nhuận, code như sau:</p>
<pre><code>function daysIn(month, year) {
    return (month === 2) ? (28 + isLeap(year)) : 31 - (month - 1) % 7 % 2;
}
</code></pre>
<h2><a href="#gộp-chung-lại-nào-thuật-toán-lập-lịch-tháng" aria-hidden="true" class="anchor" id="gộp-chung-lại-nào-thuật-toán-lập-lịch-tháng"></a>Gộp chung lại nào: Thuật toán lập lịch tháng</h2>
<p><img src="img/letscook.jpg" alt="" /></p>
<p>Bây giờ chúng ta sẽ tổng hợp các phân tích ở trên và implement thuật toán lập lịch cho một tháng bất kì.</p>
<p><strong>Input:</strong> Tháng và năm cần lập lịch, ví dụ: <strong>1</strong> và <strong>2016</strong></p>
<p><strong>Output:</strong> Một mảng 1 chiều chứa <strong>42</strong> phần tử ứng với một khung lịch <strong>6x7</strong> ô</p>
<p>Đầu tiên ta sẽ khởi tạo mảng <code>result</code> 1 chiều gồm <code>42</code> phần tử, tất cả đều mang giá trị mặc định là <code>0</code>.
Sau đó tạo 1 biến <code>startIndex</code>, có giá trị là kết quả của hàm <code>zeller()</code> với ngày đầu tiên của tháng (ngày 1). Cuối cùng bạn chỉ cần điền các ngày tương ứng từ (gía trị của) <code>startIndex</code> đến <code>daysIn(month, year)</code> của tháng hiện tại là hoàn thành.</p>
<p>Sau đây là cách implement của thuật toán bằng JavaScript:</p>
<pre><code>function calendar(month, year) {
    var startIndex = Math.trunc(zeller(1, month, year));
    var endIndex = daysIn(month, year);
    var result = Array.apply(0, Array(42)).map(function(i){ return 0; });
    for (var i = startIndex; i &lt; endIndex + startIndex; i++) {
        result[i] = (i - startIndex) + 1;
    }
    return result;
}
</code></pre>
<p>Để sử dụng, chúng ta gọi hàm <code>calendar()</code>, truyền vào <code>tháng</code> và <code>năm</code> cần tìm:</p>
<pre><code>var september = calendar(9, 2016);
</code></pre>
<p>Kết quả sẽ có dạng như sau (lưu ý các số <code>0</code> ở đầu và cuối kết quả):</p>
<pre><code>[0, 0, 0, 0, 1, 2, 3, 4, 5, 6, ..., 28, 29, 30, 0, 0, 0, 0, 0, 0, 0, 0]
</code></pre>
<p>Vậy chúng ta sẽ sử dụng kết quả này như thế nào? Chúng ta sẽ đọc mảng này theo từng cụm 7 phần tử.</p>
<p>Để kiểm chứng, mời bạn sử dụng câu lệnh <code>cal</code> (trong Mac OS X hoặc Linux) để in lịch của tháng 9 năm 2016 lên màn hình.</p>
<pre><code>cal 9 2016
</code></pre>
<p>Và đối chiếu với mảng <code>september</code> của chúng ta.</p>
<pre><code>                                       September 2016
                                    Su Mo Tu We Th Fr Sa
0,  0,  0,  0,  1,  2,  3,                       1  2  3
4,  5,  6,  7,  8,  9,  10,          4  5  6  7  8  9 10
11, 12, 13, 14, 15, 16, 17,         11 12 13 14 15 16 17
18, 19, 20, 21, 22, 23, 24,         18 19 20 21 22 23 24
25, 26, 27, 28, 29, 30, 0,          25 26 27 28 29 30
0,  0,  0,  0,  0,  0,  0
</code></pre>
<hr />
<p>Hy vọng qua bài viết này, mỗi khi nghĩ tới Datepicker hoặc việc xử lý ngày tháng, các bạn sẽ cảm thấy nó phiền phức hơn một tí =)) Nhưng bù lại các bạn đã hiểu rằng nó được tạo ra như thế nào (và cũng hiểu luôn câu quote Murphy's Law ở đầu bài :v).</p>
<p>Đến đây bạn hoàn toàn có thể tự viết cho riêng mình một component Datepicker mà không bị phụ thuộc vào bất cứ một món ăn sẵn nào nữa.</p>
<p>Hẹn gặp lại các bạn trong các bài viết tiếp theo của sê-ri <strong>Phức tạp hoá vấn đề</strong> ^^</p>
<div class='other-tags'><b>Tags:</b> <a class='topic-tag' href='../tags/algorithm.html'>algorithm</a><a class='topic-tag' href='../tags/math.html'>math</a></div>
<div class="related-posts" style="margin-top: 15px; border-bottom: 1px solid #eee;">
<p><i class="em em-sun_with_face"></i> Cảm ơn bạn đã theo dõi bài viết! các bạn có thể <a href="https://facebook.com/thefullsnackblog" target="_blank">follow mình trên Facebook</a> để đặt câu hỏi, hoặc nhận thông tin về các bài viết mới.</p>
</div>
<div class="comments">
<ul id="comment-list" class="comment-list"></ul>
<div id="login-box" class="login">
Bạn nghĩ như thế nào về bài viết này?<br /><button onclick="login()">Tham gia bình luận</button>
<div class="copyright">Chức năng này cần liên kết với tài khoản Google<br />Nếu không thích thì có thể comment <button onclick="goninja()">Nặc danh</button></div>
</div>
<div id="comment-box" class="comment-input">
<div class="avatar">
<img id="user-avatar" src="#" width="32" height="32" />
</div>
<div class="input">
<textarea id="comment-content" onkeydown="submitComment(event)" placeholder="Comment gõ vào đây :D"></textarea>
<span>Gõ xong nhấn <kbd>Ctrl</kbd> + <kbd>Enter</kbd> để gửi. Bạn không thể xóa comment sau khi gửi.</span>
<button id="comment-button" onclick="submitData()">Gửi</button>
</div>
</div>
</div>
</div>
</div>
<div class="footer lightweight-theme">
<p>you're free to use the content on this blog for whatever you want</p>
<p>Created with <i class="em em-coffee"></i> <a href="https://github.com/huytd/ristretto-rs">ristretto.rs</a></p>
</div>
<script src="../js/highlight.pack.js"></script>
<script>
        </script>
<script type="text/javascript" async src="../../cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJaxb198.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
         MathJax.Hub.Config({
             tex2jax: {
                 inlineMath: [['$','$'], ['\\(','\\)']],
                 skipTags: ["script","noscript","style","textarea", "code"],
                 ignoreClass: "tex2jax_ignore|comment|comment-list|content"
             }
         });
        </script>
<script src="../js/toc.js"></script>
<script src="../../www.gstatic.com/firebasejs/3.8.0/firebase.js"></script>
<script>
         let postCommentURL = '../api/post/phuc-tap-hoa-datepicker.json';
         // Initialize Firebase
         var config = {
             apiKey: "AIzaSyA1PnIAlJJ-U6iQJMNnCOknBuziBqGMYcY",
             authDomain: "huys-blog-comment.firebaseapp.com",
             databaseURL: "https://huys-blog-comment.firebaseio.com",
             projectId: "huys-blog-comment",
             storageBucket: "huys-blog-comment.appspot.com",
             messagingSenderId: "317330376829"
         };

         var login = function() {
             window.auth.signInWithPopup(provider)
                   .then(function(result) {
                   }).catch(function(err) {
                   });
         };

         var goninja = function() {
             updateAuth({
                 displayName: "Không Tên",
                 photoURL: "https://thefullsnack.com/img/kaonashi.jpg"
             });
         };

         var updateAuth = function(user) {
             if (user) {
                 currentUser = user;
                 // Logged in
                 document.getElementById("login-box").style.display = "none";
                 document.getElementById("comment-box").style.display = "flex";
                 document.getElementById("user-avatar").setAttribute("src", user.photoURL + "?sz=32");
             } else {
                 // Not login yet
                 document.getElementById("comment-box").style.display = "none";
                 document.getElementById("login-box").style.display = "block";
             }
         };

         var encodeHTML = function(s) {
             return s.replace(/</g, '&lt;').replace(/"/g, '&quot;').replace(/>/g, '&gt;');
         };

         var saveNewComment = function(comment) {
             if (!currentUser) {
                 return;
             }
             var commentData = {
                 username: currentUser.displayName,
                 avatar: currentUser.photoURL,
                 post_time: ~~((new Date()).getTime() / 1000),
                 message: encodeHTML(comment)
             };

             fetch(postCommentURL, {
                 method: 'post',
                 headers: {
                     "Content-Type": "application/json"
                 },
                 body: JSON.stringify(commentData)
             }).then((result) => {
                 if (result.status === 200) {
                     addNewComment(commentData.username, commentData.avatar, commentData.post_time, commentData.message);
                 }
             });

             document.getElementById("comment-content").value = "";
         };

         function debounce(func, wait, immediate) {
             var timeout;
             return function() {
                 var context = this, args = arguments;
                 var later = function() {
                     timeout = null;
                     if (!immediate) func.apply(context, args);
                 };
                 var callNow = immediate && !timeout;
                 clearTimeout(timeout);
                 timeout = setTimeout(later, wait);
                 if (callNow) func.apply(context, args);
             };
         };

         var submitData = debounce(function() {
             var comment = document.getElementById("comment-content").value;
             if (comment.length) {
                 saveNewComment(comment);
             }
         }, 250);

         var submitComment = function(e) {
             var keyCode = e.which || e.keyCode;
             var ctrlCode = e.ctrlKey || e.metaKey;
             if (keyCode === 13 && ctrlCode) {
                 submitData();
             }
         };

         var filterNewlineInComment = function(t) {
             return t.replace(/\n/g, "<br/>");
         };

         var filterURLinComment = function(comment) {
             return comment.replace(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9]\.[^\s]{2,})/g, "<a target='_blank' rel='noopener noreferrer' href='$1'>$1</a>");
         };

         var addNewComment = function(user, avatar, time, comment, first) {
             var commentFiltered = encodeHTML(comment);
             commentFiltered = filterNewlineInComment(filterURLinComment(commentFiltered));
             commentFiltered = commentFiltered.replace(/```/g, '');
             var d = new Date(time * 1000);
             var commentTime = d.toLocaleTimeString() + ' ' + d.toLocaleDateString();
             var anoNameClass = (avatar.indexOf('thefullsnack.com') !== -1) ? "grey" : "";
             var html = '<div class="avatar">' +
                        '   <img src="' + avatar + '?sz=32" width="32" height="32"/>' +
                        ' </div>' +
                        '<div class="comment">' +
                        '  <div class="metadata"><b class="' + anoNameClass + '">' + encodeHTML(user) + '</b> lúc <span>' + commentTime + '</span></div>' +
                        '  <div class="content tex2jax_ignore">' + commentFiltered
             '  </div>' +
                        '</div>';
             var li = document.createElement('li');
             li.innerHTML = html;
             if (!first) {
                 document.getElementById("comment-list").append(li);
             } else {
                 let elm = document.getElementById("comment-list");
                 elm.insertBefore(li, elm.firstChild);
             }
         };



         window.onload = function() {

             document.querySelectorAll("pre code").forEach(el => {
                 hljs.highlightBlock(el);
             });

             start_toc_module();

             firebase.initializeApp(config);
             window.provider = new firebase.auth.GoogleAuthProvider();
             window.auth = firebase.auth();
             window.currentUser = null;

             window.auth.onAuthStateChanged(function(user) {
                 updateAuth(user);
             });


             // Fetch comment and put to posts
             fetch(postCommentURL)
                 .then(res => res.json())
                 .then(data => {
                     if (data.comments) {
                         let comments = data.comments;
                         comments.sort((a, b) => a.post_time - b.post_time);
                         for (let i = 0; i < comments.length; i++) {
                             let cmt = comments[i];
                             addNewComment(cmt.username, cmt.avatar, cmt.post_time, cmt.message);
                         }
                     }
                 });
         };

         var toggle_wordwise = function(status) {
             var book = document.querySelector("book");
             var on = document.querySelector("#ww_on");
             var off = document.querySelector("#ww_off");
             if (!status) {
                 book.className = "off";
                 on.className = "btn-toggle";
                 off.className = "btn-toggle active";
             } else {
                 book.className = "";
                 on.className = "btn-toggle active";
                 off.className = "btn-toggle";
             }
         };
        </script>
</body>

<!-- Mirrored from thefullsnack.com/posts/phuc-tap-hoa-datepicker.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 May 2020 03:22:06 GMT -->
</html>
